var app=function(){"use strict";function e(){b&&localStorage.setItem("pieData",JSON.stringify(b))}function t(t,n,a){return b||(b=[]),b.push({key:"data-"+Date.now(),value:a,color:n,label:t}),o(),i(),h(),e(),!0}function n(){for(var e=0,t=b.length,n=0;t>n;n++)e+="number"==typeof b[n].value?b[n].value:0;return e}function a(){v||(v=document.getElementById("total")),v.innerHTML="<label>"+n()+"</label><span>KR</span>"}function l(e,t){var n="input[type=range]#"+e+"::-webkit-slider-thumb{    background-color: "+t+";}input[type=range]#"+e+"::-webkit-slider-container:before{     background-color: "+t+";}input[type=range]#"+e+":before{    background: "+t+";}input[type=range]#"+e+":after{    background: "+t+";}";return n}function o(){var e=document.getElementById("form"),t=document.getElementsByTagName("style");e&&(e.innerHTML=""),t&&t.length>0&&(t=t[0],t.remove())}function i(){for(var t=document.getElementById("form"),n=b.length,a=document.createElement("style"),r=!1,u=0;n>u;u++)!function(n){var u=document.createElement("div"),c=document.createElement("label"),d=document.createElement("input"),m=document.createElement("span"),v=document.createElement("button"),s=b[n].color,g=b[n].key,f=function(e){b[n].value=parseInt(e),m.innerHTML=e,h()};u.className="range-slider",c.innerHTML=b[n].label,d.id=b[n].key,d.type="range",d.min=0,d.max=100,d.value=b[n].value,v.className="delete",v.addEventListener("click",function(){b.splice(n,1),o(),i(),h(),e()}),d.addEventListener("change",function(t){f(this.value),e()},!1),d.addEventListener("mousedown",function(e){r=!0},!1),d.addEventListener("mousemove",function(e){r&&f(this.value)},!1),d.addEventListener("mouseup",function(e){r&&(r=!1)},!1),d.addEventListener("touchstart",function(e){f(this.value)},!1),d.addEventListener("touchmove",function(e){f(this.value)},!1),m.className="range-value",m.innerHTML=b[n].value,u.appendChild(c),u.appendChild(m),u.appendChild(d),u.appendChild(v),t.appendChild(u),a.innerHTML+=l(g,s)}(u),a.type="text/css",a.media="all",document.body.appendChild(a)}function r(e,t){var n=t.width-10,a=t.height-10,l=n/2+5,o=a/2+5,i=n/2;e.beginPath(),e.fillStyle="#EEE9DB",e.moveTo(o,l),e.shadowBlur=5,e.shadowColor="rgba(0, 0, 0, .75)",e.arc(o,l,i,0,2*Math.PI,!1),e.fill(),e.closePath(),e.shadowBlur=0,e.shadowColor="rgba(0,0,0,0)"}function u(e,t){for(var a=b.length,l=n(),o=t.width-10,i=t.height-10,r=o/2+5,u=i/2+5,c=o/2-4,d=0,h=0,m="#000",v=0;a>v;v++)h=2*Math.PI*(b[v].value/l),m=b[v].color,e.fillStyle=m,e.beginPath(),e.moveTo(u,r),e.arc(u,r,c,d,d+h,!1),e.fill(),e.closePath(),d+=h}function c(e,t){var n=(b.length,t.width-10),a=t.height-10,l=n/2+5,o=a/2+5,i=n/2-35;e.beginPath(),e.fillStyle="#EEE9DB",e.moveTo(o,l),e.arc(o,l,i,0*Math.PI,2*Math.PI),e.fill(),e.closePath()}function d(e,t){var n=(b.length,t.width-10),a=t.height-10,l=(t.width/2,t.height/2,n/2+5),o=a/2+5,i=n/2-40;e.beginPath(),e.shadowBlur=2,e.shadowColor="rgba(0, 0, 0, .75)",e.fillStyle="#EEE9DB",e.moveTo(o,l),e.arc(o,l,i,0*Math.PI,2*Math.PI),e.fill(),e.closePath()}function h(){var e,t;e=document.getElementById("canvas"),t=e.getContext("2d"),t.clearRect(0,0,e.width,e.height),r(t,e),u(t,e),c(t,e),d(t,e),setTimeout(function(){a()},100)}function m(){var e=document.getElementById("add-btn");e.addEventListener("click",function(e){var n=document.getElementById("label"),a=(document.getElementById("amount"),document.getElementById("color")),l=n.value,o=amount.value,i=a.value;t(l,i,o),n.value="",amount.value="",a.value="#000000",e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()})}var v,s={key:"data-1",value:0,color:"#976B90",label:"Children and young people"},g={key:"data-2",value:0,color:"#DF7E28",label:"Animals and environment"},f={key:"data-3",value:0,color:"#7BA241",label:"Research"},p={key:"data-4",value:0,color:"#59869B",label:"Humanitarian"},y={key:"data-5",value:0,color:"#D46C95",label:"opinion"},E={key:"data-6",value:0,color:"#DEC024",label:"Acute"},b=[s,g,f,p,y,E],B=localStorage.getItem("pieData");if(B)try{b=JSON.parse(B)}catch(k){console.log(k)}return{init:function(){m(),i(),h()}}}();document.addEventListener("DOMContentLoaded",app.init,!1);